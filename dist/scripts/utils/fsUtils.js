import { promisify } from 'scripts/utils/promiseUtils';
export class FileSystem {
    ns;
    filepath;
    constructor(ns, filepath) {
        this.ns = ns;
        this.filepath = filepath;
    }
    /**
     * Creates a new file or clears an existing one.
     */
    async newFile() {
        await this.write('', 'w');
    }
    async write(data, mode = 'w') {
        const formattedData = JSON.stringify(data);
        return await promisify(this.ns.write, this.filepath, formattedData, mode);
    }
    /**
     * Reads data from the file and parses it from JSON.
     */
    async read() {
        let dataString = await promisify(this.ns.read, this.filepath);
        return dataString.length > 0 ? JSON.parse(dataString) : null;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnNVdGlscy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zY3JpcHRzL3V0aWxzL2ZzVXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBRXZELE1BQU0sT0FBTyxVQUFVO0lBQ1E7SUFBeUI7SUFBdEQsWUFBNkIsRUFBTSxFQUFtQixRQUFnQjtRQUF6QyxPQUFFLEdBQUYsRUFBRSxDQUFJO1FBQW1CLGFBQVEsR0FBUixRQUFRLENBQVE7SUFBRyxDQUFDO0lBRTFFOztPQUVHO0lBQ0gsS0FBSyxDQUFDLE9BQU87UUFDWCxNQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsRUFBTyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ2pDLENBQUM7SUFFRCxLQUFLLENBQUMsS0FBSyxDQUFDLElBQU8sRUFBRSxPQUFrQixHQUFHO1FBQ3hDLE1BQU0sYUFBYSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDM0MsT0FBTyxNQUFNLFNBQVMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsUUFBUSxFQUFFLGFBQWEsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUM1RSxDQUFDO0lBRUQ7O09BRUc7SUFDSCxLQUFLLENBQUMsSUFBSTtRQUNSLElBQUksVUFBVSxHQUFHLE1BQU0sU0FBUyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUM5RCxPQUFPLFVBQVUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFDL0QsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTlMgfSBmcm9tICdAbnMnO1xuaW1wb3J0IHsgcHJvbWlzaWZ5IH0gZnJvbSAnc2NyaXB0cy91dGlscy9wcm9taXNlVXRpbHMnO1xuXG5leHBvcnQgY2xhc3MgRmlsZVN5c3RlbTxUID0gdW5rbm93bj4ge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IG5zOiBOUywgcHJpdmF0ZSByZWFkb25seSBmaWxlcGF0aDogc3RyaW5nKSB7fVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IGZpbGUgb3IgY2xlYXJzIGFuIGV4aXN0aW5nIG9uZS5cbiAgICovXG4gIGFzeW5jIG5ld0ZpbGUoKSB7XG4gICAgYXdhaXQgdGhpcy53cml0ZSgnJyBhcyBULCAndycpO1xuICB9XG5cbiAgYXN5bmMgd3JpdGUoZGF0YTogVCwgbW9kZTogJ3cnIHwgJ2EnID0gJ3cnKSB7XG4gICAgY29uc3QgZm9ybWF0dGVkRGF0YSA9IEpTT04uc3RyaW5naWZ5KGRhdGEpO1xuICAgIHJldHVybiBhd2FpdCBwcm9taXNpZnkodGhpcy5ucy53cml0ZSwgdGhpcy5maWxlcGF0aCwgZm9ybWF0dGVkRGF0YSwgbW9kZSk7XG4gIH1cblxuICAvKipcbiAgICogUmVhZHMgZGF0YSBmcm9tIHRoZSBmaWxlIGFuZCBwYXJzZXMgaXQgZnJvbSBKU09OLlxuICAgKi9cbiAgYXN5bmMgcmVhZCgpOiBQcm9taXNlPFQgfCBudWxsPiB7XG4gICAgbGV0IGRhdGFTdHJpbmcgPSBhd2FpdCBwcm9taXNpZnkodGhpcy5ucy5yZWFkLCB0aGlzLmZpbGVwYXRoKTtcbiAgICByZXR1cm4gZGF0YVN0cmluZy5sZW5ndGggPiAwID8gSlNPTi5wYXJzZShkYXRhU3RyaW5nKSA6IG51bGw7XG4gIH1cbn1cbiJdfQ==